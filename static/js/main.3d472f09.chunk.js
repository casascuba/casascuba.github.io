(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),l=(n(85),n(134)),i=n(133),u=n(29),s=n(20),m=n(72),d=Object(m.a)({typography:{},palette:{}}),f=n(17),p=n(47),h=n(27),b=n(50),g=n(48),E=n(49),v=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),t}(a.Component),O=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"This is my about component")}}]),t}(a.Component),y=n(7),j=r.a.lazy(function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,140))});function w(){var e=Object(a.useContext)(y.a),t=e.state,n=e.dispatch,c=t.houses;Object(a.useEffect)(function(){0===c.length&&Object(y.c)(n)});var o={houses:c};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null),r.a.createElement(a.Suspense,{fallback:r.a.createElement(f.b,{message:"Descargando el componente para usted...",absolute:!0})},r.a.createElement(j,o)))}var k=r.a.lazy(function(){return n.e(4).then(n.bind(null,141))});function S(e){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Setting things up for you...")},r.a.createElement(k,null))}function I(){return r.a.createElement("div",null)}function C(){return r.a.createElement("div",null)}var x=n(34),N=r.a.lazy(function(){return n.e(7).then(n.bind(null,142))});function T(){var e=Object(a.useContext)(y.a),t=e.state,n=e.dispatch,c=t.users;Object(a.useEffect)(function(){0===c.length&&Object(y.d)(n)});var o={users:c};return r.a.createElement(a.Suspense,{fallback:r.a.createElement(x.a,{message:"Descargando el componente para usted...",absolute:!0})},r.a.createElement(N,o))}var A=r.a.lazy(function(){return n.e(6).then(n.bind(null,143))});function P(e){var t=new URLSearchParams(e.location.search).get("back"),n=Object(a.useContext)(y.a),c=n.state,o=n.dispatch;return r.a.createElement(r.a.Fragment,null,c.session&&r.a.createElement(f.e,{to:t}),r.a.createElement(a.Suspense,{fallback:r.a.createElement(x.a,{message:"Descragando formulario...",absolute:!0})},r.a.createElement(A,{trigger:o})))}function F(){return r.a.createElement("div",null)}function U(){return r.a.createElement("div",null)}var L=n(112),_=function(e){var t=document.getElementById("login-email").value,n=document.getElementById("login-password").value;Object(y.e)(t,n,e)};function H(e){var t=new URLSearchParams(e.location.search).get("back"),n=Object(a.useContext)(y.a).dispatch,c=localStorage.getItem("casascuba-jwt");return r.a.createElement("div",null,c&&r.a.createElement(f.e,{to:t}),r.a.createElement(L.a,null,"Login"),r.a.createElement("form",null,r.a.createElement("input",{id:"login-email"}),r.a.createElement("input",{type:"password",id:"login-password"}),r.a.createElement("input",{type:"submit",onClick:function(e){e.preventDefault(),_(n)}})),r.a.createElement("br",null),r.a.createElement(s.b,{to:{pathname:"/users/new",search:"?back="+t}},"Sing in instead"))}function R(e){var t=e.location,n=new URLSearchParams(t.search).get("back");return Object(a.useContext)(y.a).dispatch(Object(y.f)()),r.a.createElement(f.e,{to:n})}function W(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:v}),r.a.createElement(u.b,{exact:!0,path:"/about",component:O}),r.a.createElement(u.b,{exact:!0,path:"/houses",component:w}),r.a.createElement(u.b,{exact:!0,path:"/houses/new",component:S}),r.a.createElement(u.b,{exact:!0,path:"/houses/:id",component:I}),r.a.createElement(u.b,{exact:!0,path:"/houses/:id/edit",component:C}),r.a.createElement(u.b,{path:"/login",component:H}),r.a.createElement(u.b,{path:"/logout",component:R}),r.a.createElement(u.b,{exact:!0,path:"/users",component:T}),r.a.createElement(u.b,{exact:!0,path:"/users/new",component:P}),r.a.createElement(u.b,{exact:!0,path:"/users/:id",component:F}),r.a.createElement(u.b,{exact:!0,path:"/users/:id/edit",component:U}))}var z=function(){return r.a.createElement(i.a,{theme:d},r.a.createElement(l.a,null),r.a.createElement(s.a,null,r.a.createElement(f.c,null),r.a.createElement("div",{className:"container"},r.a.createElement(f.d,null),r.a.createElement(W,null))))},B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.b,null,r.a.createElement(z,null)))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");B?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):D(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):D(t,e)})}}()},17:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(128),o=n(137),l=n(111),i=n(129),u=n(112),s=n(130),m=n(131),d=n(29),f=n(20);function p(e){var t=e.children,n=e.window,a=Object(c.a)({target:n?n():void 0});return r.a.createElement(o.a,{appear:!1,direction:"down",in:!a},t)}var h=Object(l.a)({title:{flexGrow:1,textDecoration:"none",color:"inherit"}});function b(e){return r.a.createElement(f.b,e,r.a.createElement(i.a,null,r.a.createElement(u.a,{color:"inherit",variant:"caption",className:"nav-link"},e.children)))}function g(e){var t=e.location,n=h(),a=localStorage.getItem("casascuba-jwt");return r.a.createElement(p,null,r.a.createElement(s.a,{color:"primary"},r.a.createElement(m.a,null,r.a.createElement(f.b,{to:"/",className:n.title},r.a.createElement(u.a,{variant:"h6"},"CasasCuba\xae")),r.a.createElement(function(){return a?r.a.createElement(b,{to:{pathname:"/logout",search:"?back="+t.pathname}},"Salir"):r.a.createElement(b,{to:{pathname:"/login",search:"?back="+t.pathname}},"Entrar")},null))))}var E=Object(d.g)(function(e){return r.a.createElement(g,e)}),v=n(135),O=n(132),y=n(71),j=n.n(y),w=n(7),k=Object(l.a)({snack:{top:90}});function S(){var e=Object(a.useContext)(w.a),t=e.state,n=e.dispatch,c=t.notifications,l=k(),i=function(e){return r.a.createElement(o.a,Object.assign({},e,{direction:"left"}))};return r.a.createElement("div",null,c.map(function(e){return r.a.createElement("div",{key:e.message},r.a.createElement(v.a,{open:!0,anchorOrigin:{vertical:"top",horizontal:"right"},TransitionComponent:i,ContentProps:{"aria-describedby":"message-id"},className:l.snack,message:r.a.createElement("span",{id:"client-snackbar"},e.message),action:[r.a.createElement(O.a,{key:"close","aria-label":"close",color:"inherit",onClick:function(){return t=e,void n(Object(w.g)(t));var t}},r.a.createElement(j.a,null))]}))}))}function I(e){var t=e.to;return r.a.createElement(d.a,{to:t||"/"})}var C=n(34);function x(e){var t=e.location,n=localStorage.getItem("casascuba-jwt"),c=Object(a.useContext)(w.a).dispatch;return n||c(Object(w.h)({message:"You need to login in order to access this resource :("})),n?r.a.createElement(a.Fragment,null):r.a.createElement(d.a,{to:{pathname:"/login",search:"?back="+t.pathname}})}var N=Object(d.g)(function(e){return r.a.createElement(x,e)});n.d(t,"c",function(){return E}),n.d(t,"d",function(){return S}),n.d(t,"e",function(){return I}),n.d(t,"a",function(){return N}),n.d(t,"b",function(){return C.a})},34:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(0),r=n.n(a),c=n(75),o=n(114),l=n(112),i=Object(c.a)({containerAbsolute:{position:"absolute",width:"100%",height:"100%",top:0,background:"#ffffffa0",zIndex:1101,display:"table",touchAction:"none"},containerWide:{width:"100%"},centerd:{display:"table-cell",verticalAlign:"middle",textAlign:"center"}});function u(e){var t=e.message,n=e.absolute,a=i(),c=n?a.containerAbsolute:a.containerWide;return r.a.createElement("div",{className:c},r.a.createElement("div",{className:a.centerd},r.a.createElement(o.a,null),r.a.createElement(l.a,{color:"primary"},t)))}},7:function(e,t,n){"use strict";var a=n(73),r=n(0),c=n.n(r),o=n(39),l=n.n(o),i=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t="Bearer "+localStorage.getItem("casascuba-jwt");l()({method:"get",url:"/api/houses",headers:{Authorization:t}}).then(function(t){return e({type:"FETCH_HOUSES",payload:t.data})})};function u(e){return{type:"POP_NOTIFICATION",payload:e}}function s(e){return{type:"PUSH_NOTIFICATION",payload:e}}function m(e,t,n){var a={auth:{email:e,password:t}};Object(o.post)("/api/user_token",a).then(function(e){return localStorage.setItem("casascuba-jwt",e.data.jwt),n({type:"PUSH_NOTIFICATION",payload:{message:"Login successfully"}})}).catch(function(e){return n({type:"PUSH_NOTIFICATION",payload:e})})}function d(){return localStorage.removeItem("casascuba-jwt"),{type:"PUSH_NOTIFICATION",payload:{message:"Logout successfully"}}}var f=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o.get)("/api/users").then(function(t){return e({type:"FETCH_USERS",payload:t.data})})},p=n(36),h=n(33);function b(e,t,n){var a=!0,r=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){if(n(o.value,t))return!0}}catch(i){r=!0,c=i}finally{try{a||null==l.return||l.return()}finally{if(r)throw c}}return!1}function g(e,t,n){var a=e,r=!0,c=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var u=l.value;b(a,u,n)||a.push(u)}}catch(s){c=!0,o=s}finally{try{r||null==i.return||i.return()}finally{if(c)throw o}}return a}var E={houses:[],users:[],session:void 0,notifications:[]};function v(e,t){var n,a,r=e.notifications;switch(t.type){case"FETCH_HOUSES":return Object(h.a)({},e,{houses:g(e.houses,t.payload,function(e,t){return e.slug===t.slug})});case"PUSH_NOTIFICATION":var c=t.payload;if(!b(r,c,function(e,t){return e.message===t.message}))return Object(h.a)({},e,{notifications:[].concat(Object(p.a)(r),[c])});break;case"POP_NOTIFICATION":var o=t.payload;return Object(h.a)({},e,{notifications:(n=r,a=o,n.filter(function(e,t,n){return e!==a}))});case"LOGIN":return Object(h.a)({},e,{session:!0,notifications:[].concat(Object(p.a)(r),[{message:"Login successfully"}])});case"LOGOUT":return Object(h.a)({},e,{session:void 0,notifications:[].concat(Object(p.a)(r),[{message:"Logout successfully"}])});case"FETCH_USERS":return Object(h.a)({},e,{users:g(e.users,t.payload,function(e,t){return e.email===t.email})})}return e}n.d(t,"a",function(){return O}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return i}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return s}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return f});var O=c.a.createContext();function y(e){var t=c.a.useReducer(v,E),n=Object(a.a)(t,2),r={state:n[0],dispatch:n[1]};return c.a.createElement(O.Provider,{value:r},e.children)}},80:function(e,t,n){e.exports=n(109)},85:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.3d472f09.chunk.js.map