(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){"use strict";var a=n(86),r=n(0),c=n.n(r),o=n(44),i=n.n(o),l=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t="Bearer "+localStorage.getItem("casascuba-jwt");i()({method:"get",url:"/api/houses",headers:{Authorization:t}}).then(function(t){return e({type:"FETCH_HOUSES",payload:t.data})})};function u(e){return{type:"POP_NOTIFICATION",payload:e}}function s(e){return{type:"PUSH_NOTIFICATION",payload:e}}function m(e,t,n){var a={auth:{email:e,password:t}};Object(o.post)("/api/user_token",a).then(function(e){return localStorage.setItem("casascuba-jwt",e.data.jwt),n({type:"PUSH_NOTIFICATION",payload:{message:"Login successfully"}})}).catch(function(e){return n({type:"PUSH_NOTIFICATION",payload:e})})}function d(){return localStorage.removeItem("casascuba-jwt"),{type:"PUSH_NOTIFICATION",payload:{message:"Logout successfully"}}}var f=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o.get)("/api/users").then(function(t){return e({type:"FETCH_USERS",payload:t.data})})},p=n(42),b=n(35);function h(e,t,n){var a=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){if(n(o.value,t))return!0}}catch(l){r=!0,c=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return!1}function g(e,t,n){var a=e,r=!0,c=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;h(a,u,n)||a.push(u)}}catch(s){c=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(c)throw o}}return a}var E={houses:[],users:[],session:void 0,notifications:[]};function v(e,t){var n,a,r=e.notifications;switch(t.type){case"FETCH_HOUSES":return Object(b.a)({},e,{houses:g(e.houses,t.payload,function(e,t){return e.slug===t.slug})});case"PUSH_NOTIFICATION":var c=t.payload;if(!h(r,c,function(e,t){return e.message===t.message}))return Object(b.a)({},e,{notifications:[].concat(Object(p.a)(r),[c])});break;case"POP_NOTIFICATION":var o=t.payload;return Object(b.a)({},e,{notifications:(n=r,a=o,n.filter(function(e,t,n){return e!==a}))});case"LOGIN":return Object(b.a)({},e,{session:!0,notifications:[].concat(Object(p.a)(r),[{message:"Login successfully"}])});case"LOGOUT":return Object(b.a)({},e,{session:void 0,notifications:[].concat(Object(p.a)(r),[{message:"Logout successfully"}])});case"FETCH_USERS":return Object(b.a)({},e,{users:g(e.users,t.payload,function(e,t){return e.email===t.email})})}return e}n.d(t,"a",function(){return O}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return s}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return f});var O=c.a.createContext();function y(e){var t=c.a.useReducer(v,E),n=Object(a.a)(t,2),r={state:n[0],dispatch:n[1]};return c.a.createElement(O.Provider,{value:r},e.children)}},123:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=(n(99),n(163)),l=n(162),u=n(30),s=n(24),m=n(85),d=Object(m.a)({typography:{},palette:{}}),f=n(21),p=n(53),b=n(28),h=n(56),g=n(54),E=n(55),v=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),t}(a.Component),O=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"This is my about component")}}]),t}(a.Component),y=n(11),j=r.a.lazy(function(){return n.e(4).then(n.bind(null,175))});function w(){var e=Object(a.useContext)(y.a),t=e.state,n=e.dispatch,c=t.houses;Object(a.useEffect)(function(){0===c.length&&Object(y.c)(n)});var o={houses:c};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null),r.a.createElement(a.Suspense,{fallback:r.a.createElement(f.b,{message:"Descargando el componente para usted...",absolute:!0})},r.a.createElement(j,o)))}var k=r.a.lazy(function(){return n.e(3).then(n.bind(null,172))});function C(e){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Setting things up for you...")},r.a.createElement(k,null))}function S(){return r.a.createElement("div",null)}function I(){return r.a.createElement("div",null)}var x=n(37),N=r.a.lazy(function(){return n.e(6).then(n.bind(null,173))});function T(){var e=Object(a.useContext)(y.a),t=e.state,n=e.dispatch,c=t.users;Object(a.useEffect)(function(){0===c.length&&Object(y.d)(n)});var o={users:c};return r.a.createElement(a.Suspense,{fallback:r.a.createElement(x.a,{message:"Descargando el componente para usted...",absolute:!0})},r.a.createElement(N,o))}var F=n(38),P=r.a.lazy(function(){return n.e(5).then(n.bind(null,174))});function A(e){var t=new URLSearchParams(e.location.search).get("back"),n=Object(a.useContext)(y.a),c=n.state,o=n.dispatch;return r.a.createElement(r.a.Fragment,null,c.session&&r.a.createElement(f.e,{to:t}),r.a.createElement(a.Suspense,{fallback:r.a.createElement(x.a,{message:"Descragando formulario...",absolute:!0})},r.a.createElement(F.a,{absolute:!0,centerContent:!0},r.a.createElement(P,{trigger:o}))))}function U(){return r.a.createElement("div",null)}function L(){return r.a.createElement("div",null)}var _=n(126),H=n(88),R=n(164),z=n(157),B=n(89),W=n(3),D=Object(B.a)(function(e){return{paper:{padding:30},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},dense:{marginTop:e.spacing(2)},submitButton:{margin:10}}}),G=function(e){var t=document.getElementById("login-email").value,n=document.getElementById("login-password").value;Object(y.e)(t,n,e)};function J(e){var t=new URLSearchParams(e.location.search).get("back"),n=Object(a.useContext)(y.a).dispatch,c=localStorage.getItem("casascuba-jwt"),o=D();return r.a.createElement(F.a,{absolute:!0,centerContent:!0},c&&r.a.createElement(f.e,{to:t}),r.a.createElement(_.a,{className:o.paper},r.a.createElement(H.a,null,r.a.createElement(H.a,{item:!0},r.a.createElement(R.a,{id:"login-email",label:"Email",className:Object(W.a)(o.textField,o.dense),margin:"dense",variant:"outlined"})),r.a.createElement(H.a,{item:!0},r.a.createElement(R.a,{id:"login-password",label:"Password",className:Object(W.a)(o.textField,o.dense),margin:"dense",variant:"outlined",type:"password"})),r.a.createElement(H.a,{item:!0},r.a.createElement(z.a,{onClick:function(){return G(n)},color:"primary",variant:"contained",className:o.submitButton},"Login")),r.a.createElement(H.a,{item:!0},r.a.createElement(s.b,{to:{pathname:"/users/new",search:"?back="+t}},"Sing in instead")))))}function Y(e){var t=e.location,n=new URLSearchParams(t.search).get("back");return Object(a.useContext)(y.a).dispatch(Object(y.f)()),r.a.createElement(f.e,{to:n})}function $(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:v}),r.a.createElement(u.b,{exact:!0,path:"/about",component:O}),r.a.createElement(u.b,{exact:!0,path:"/houses",component:w}),r.a.createElement(u.b,{exact:!0,path:"/houses/new",component:C}),r.a.createElement(u.b,{exact:!0,path:"/houses/:id",component:S}),r.a.createElement(u.b,{exact:!0,path:"/houses/:id/edit",component:I}),r.a.createElement(u.b,{path:"/login",component:J}),r.a.createElement(u.b,{path:"/logout",component:Y}),r.a.createElement(u.b,{exact:!0,path:"/users",component:T}),r.a.createElement(u.b,{exact:!0,path:"/users/new",component:A}),r.a.createElement(u.b,{exact:!0,path:"/users/:id",component:U}),r.a.createElement(u.b,{exact:!0,path:"/users/:id/edit",component:L}))}var q=function(){return r.a.createElement(l.a,{theme:d},r.a.createElement(i.a,null),r.a.createElement(s.a,null,r.a.createElement(f.c,null),r.a.createElement("div",{className:"container"},r.a.createElement(f.d,null),r.a.createElement($,null))))},K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.b,null,r.a.createElement(q,null)))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");K?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):M(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):M(t,e)})}}()},21:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(154),o=n(155),i=n(124),l=n(157),u=n(125),s=n(158),m=n(159),d=n(30),f=n(24);function p(e){var t=e.children,n=e.window,a=Object(c.a)({target:n?n():void 0});return r.a.createElement(o.a,{appear:!1,direction:"down",in:!a},t)}var b=Object(i.a)({title:{flexGrow:1,textDecoration:"none",color:"inherit"}});function h(e){return r.a.createElement(f.b,e,r.a.createElement(l.a,null,r.a.createElement(u.a,{color:"inherit",variant:"caption",className:"nav-link"},e.children)))}function g(e){var t=e.location,n=b(),a=localStorage.getItem("casascuba-jwt");return r.a.createElement(p,null,r.a.createElement(s.a,{color:"primary"},r.a.createElement(m.a,null,r.a.createElement(f.b,{to:"/",className:n.title},r.a.createElement(u.a,{variant:"h6"},"CasasCuba\xae")),r.a.createElement(function(){return a?r.a.createElement(h,{to:{pathname:"/logout",search:"?back="+t.pathname}},"Salir"):r.a.createElement(h,{to:{pathname:"/login",search:"?back="+t.pathname}},"Entrar")},null))))}var E=Object(d.g)(function(e){return r.a.createElement(g,e)}),v=n(165),O=n(161),y=n(83),j=n.n(y),w=n(11),k=Object(i.a)({snack:{top:90}});function C(){var e=Object(a.useContext)(w.a),t=e.state,n=e.dispatch,c=t.notifications,i=k(),l=function(e){return r.a.createElement(o.a,Object.assign({},e,{direction:"left"}))};return r.a.createElement("div",null,c.map(function(e){return r.a.createElement("div",{key:e.message},r.a.createElement(v.a,{open:!0,anchorOrigin:{vertical:"top",horizontal:"right"},TransitionComponent:l,ContentProps:{"aria-describedby":"message-id"},className:i.snack,message:r.a.createElement("span",{id:"client-snackbar"},e.message),action:[r.a.createElement(O.a,{key:"close","aria-label":"close",color:"inherit",onClick:function(){return t=e,void n(Object(w.g)(t));var t}},r.a.createElement(j.a,null))]}))}))}function S(e){var t=e.to;return r.a.createElement(d.a,{to:t||"/"})}var I=n(37);function x(e){var t=e.location,n=localStorage.getItem("casascuba-jwt"),c=Object(a.useContext)(w.a).dispatch;return n||c(Object(w.h)({message:"You need to login in order to access this resource :("})),n?r.a.createElement(a.Fragment,null):r.a.createElement(d.a,{to:{pathname:"/login",search:"?back="+t.pathname}})}var N=Object(d.g)(function(e){return r.a.createElement(x,e)});n.d(t,"c",function(){return E}),n.d(t,"d",function(){return C}),n.d(t,"e",function(){return S}),n.d(t,"a",function(){return N}),n.d(t,"b",function(){return I.a})},37:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(0),r=n.n(a),c=n(38),o=n(127),i=n(125);function l(e){var t=e.message,n=e.absolute;return r.a.createElement(c.a,{absolute:n,centerContent:!0,background:"#ffffffa0"},r.a.createElement(o.a,null),r.a.createElement(i.a,{color:"primary"},t))}},38:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(0),r=n.n(a),c=n(89),o=n(88),i=n(3),l=Object(c.a)({full:{width:"100%",height:"100%",boxSizing:"inherit"},absolute:{position:"absolute",top:0,left:0,display:"table",touchAction:"none"},realtive:{},centerd:{display:"table-cell",verticalAlign:"middle"},textCenter:{textAlign:"center"}});function u(e){var t=e.children,n=e.absolute,a=e.centerContent,c=e.background,u=l(),s=u.full;return s=Object(i.a)(s,n?u.absolute:u.realtive),s=a?Object(i.a)(s,u.textCenter):s,r.a.createElement("div",{className:s,style:{background:c||"transparent"}},r.a.createElement("div",{className:u.centerd},r.a.createElement(o.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(o.a,{item:!0},t))))}},94:function(e,t,n){e.exports=n(123)},99:function(e,t,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.dd46e87b.chunk.js.map